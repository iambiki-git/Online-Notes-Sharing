{% extends "notes/base.html" %}
{% load static %}
{% block heroSection %}{% endblock %}
{% block dashboard %}{% endblock %}
{% block notes %}
<div class="bg-zinc-900 text-white min-h-screen p-6 md:p-12">
    
    <!-- Search Bar Section -->
    <div class="mb-8 flex justify-center">
        <div class="w-full md:w-1/2">
            <input type="text" id="searchInput" placeholder="Search notes..." 
                   class="w-full px-4 py-2 text-slate-300 bg-zinc-800 rounded-lg focus:outline-none focus:ring focus:ring-blue-500" 
                   oninput="searchNotes()">
        </div>
    </div>

    <!-- Notes Section -->
    <div id="notesContainer" class="grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
        {% for note in notes %}
        <div class="bg-zinc-800 p-6 rounded-lg shadow-lg hover:shadow-2xl transition-shadow duration-200 ease-in-out">
            <h2 class="text-lg font-semibold text-slate-300 mb-2">{{ note.faculty }}</h2>
            <p class="text-slate-400 text-sm mb-4">{{ note.title|truncatewords:20 }}</p>
            <div class="flex justify-between items-center">
                <!-- Read More Link -->
                <a href="{% if note.file %}{{ note.file.url }}{% else %}#{% endif %}" 
                   class="text-blue-400 hover:underline"
                   target="_blank">
                   Read More
                </a>
                
                <!-- Download Icon with Boxicon -->
                <a href="{% if note.file %}{{ note.file.url }}{% else %}#{% endif %}" 
                   download 
                   class="text-blue-400 hover:text-blue-500 ml-2">
                    <i class='bx bxs-download text-xl'></i>
                </a>
                
                <!-- Upload Date -->
                <p class="text-sm text-slate-500">{{ note.upload_date|date:"M d, Y" }}</p>
            </div>
        </div>
        {% empty %}
        <p class="text-slate-400 col-span-full text-center mt-6">No notes found.</p>
        {% endfor %}
    </div>

</div>

<script>
    // Search Notes Functionality
    function searchNotes() {
        const searchQuery = document.getElementById('searchInput').value.toLowerCase();
        const notes = document.querySelectorAll('#notesContainer > div');
        
        notes.forEach(note => {
            const title = note.querySelector('h2').textContent.toLowerCase();
            const description = note.querySelector('p').textContent.toLowerCase();

            if (title.includes(searchQuery) || description.includes(searchQuery)) {
                note.style.display = "block";
            } else {
                note.style.display = "none";
            }
        });
    }
</script>
{% endblock %}
